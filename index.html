<!DOCTYPE html>
<html lang = 'en'>
    <head>
        <meta charset="utf-8">
        <title>Study Time Against GPA</title>
        
        <script 
        type = 'text/javascript'
        src='https://d3js.org/d3.v5.min.js'>
        </script>

        <style type ='text/css'> 
                circle {fill: lightblue; stroke: black;}
        </style>
                    
    </head>

    <body onload='init()'>
        <div>
            <button class = "dataWhite"> Update Visual </button>
        </div>
       
    
<svg width=800 height=800>
</svg>
<script>
async function init() {

var width = 500;
var height = 500;
var margin = 50;



const data = await d3.csv("https://shuq-git.github.io/Student_performance_data _.csv");

//Filter data for parents with maximum education
const dataWhite = data.filter(function(d) {return d.Ethnicity == 0 && d.Tutoring ==1});
const dataBlack = data.filter(function(d) {return d.Ethnicity == 1});
const dataAsian = data.filter(function(d) {return d.Ethnicity == 2});


//Create the scales
var x = d3.scaleLinear().domain([0, 20]).range([0, 500]);
var y = d3.scaleLinear().domain([0, 4]).range([500, 0]);

//Create the svg
d3.select('svg')
 .attr('width', width + 2*margin)
 .attr('height', height + 2*margin)
 .append('g')
  .attr("transform","translate(" + margin + "," + margin + ")")
  .selectAll('circle')
  .data(dataWhite)
  .enter()
  .append('circle')
    .attr('cx', function(d) {return x(d.StudyTimeWeekly);})
    .attr('cy', function(d) {return y(d.GPA);})
    .attr('r', 2);

//Add axes
d3.select('svg')
  .append('g')
  .attr("transform","translate(" + margin + "," + margin + ")")
  .call(d3.axisLeft(y));

d3.select('svg')
  .append('g')
  .attr("transform","translate(" + margin + "," + (height+margin) + ")")
  .call(d3.axisBottom(x));

//Add titles of axes

d3.select('svg')
    .append("text")
        .attr("text-anchor", "end")
        .attr("x", width/2)
        .attr("y", height + margin + 30)
        .text("Weekly Study Time in Hours");


d3.select('svg')
    .append("text")
        .attr("text-anchor", "end")
        .attr("transform", "rotate(-90)")
        .attr("y", 20)
        .attr("x", -250)
        .text("GPA");


//On click, update with the other datasets
d3.select("button")
    .on("click", function()
                {
                d3.select('svg')
                .selectAll('circle')
                .data(dataBlack)
                .transition()
                .duration(1000)
                
                .on("start", function() {
                    d3.select(this).attr("fill", "magenta");
                })
                .attr('cx', function(d) {return x(d.StudyTimeWeekly);})
                .attr('cy', function(d) {return y(d.GPA);})

                .on("end", function(){
                    d3.select(this).attr("fill", "magenta");
                });


                

                });

    

}
</script>
</body>
</html>
